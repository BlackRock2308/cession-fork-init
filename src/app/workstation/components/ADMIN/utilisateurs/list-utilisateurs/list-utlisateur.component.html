<div class="grid">
    <div class="col-12">
        <div class="d-flex justify-content-center col-12">
            <div class="col-12 md:col-10 modalTitle  ">
                <h3 class="title">Liste des utilisateurs</h3>
            </div>
        </div>
        <div class="card">
            <button  style="margin-left: 80%;" id="valider" pButton pRipple label="Ajouter un utilisateur"
                icon="pi pi-plus" class="successButton" (click)="ajouterUtilisateur()"></button>
            <p-table #dt [value]="utilisateurs" [columns]="cols" responsiveLayout="scroll" [rows]="10"
                [globalFilterFields]="['code','libelle']" [rows]="10"
                [paginator]="true" [rowsPerPageOptions]="[5,10,20,30]" [showCurrentPageReport]="true"
                currentPageReportTemplate=" {totalRecords} lignes " [rowHover]="true" dataKey="id">
                <ng-template pTemplate="header">                                        
                    <!-- <tr>
                        <th>
                            <p-columnFilter type="text" field="code" placeholder="Code"></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter type="text" field="libelle" placeholder="Libellé">
                            </p-columnFilter>
                        </th>
                        <th>
                            <button pButton pRipple pTooltip="Rechercher" icon="pi pi-search"
                                class="p-button-rounded mr-2 simpleBoldButton" label="Rechercher"
                                (click)="dt.filter()"></button>
                        </th>
                        <th *ngIf="rangeDates!=undefined">
                            <button pButton pRipple pTooltip="Annuler" icon="pi pi-times" class="p-button-rounded "
                                label="Annuler" (click)="clearRange(dt)"
                                style="background: white; color:#203359"></button>
                        </th>
                    </tr> -->
                    <tr>
                        <th pSortableColumn="prenom_nom" style="color: #203359;">Prénom & Nom<p-sortIcon
                                field="prenom_nom"></p-sortIcon>
                        </th>
                        <th pSortableColumn="telephone" style="color: #203359;">Téléphone<p-sortIcon
                                field="telephone"></p-sortIcon>
                        </th>
                        <th pSortableColumn="email" style="color: #203359;">Email<p-sortIcon
                            field="email"></p-sortIcon>
                    </th>
                    <th pSortableColumn="profil" style="color: #203359;">Profil<p-sortIcon
                            field="profil"></p-sortIcon>
                    </th>
                        <th style="color: #203359;">Actions</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-utilisateur>
                    <tr>
                        <td style="width:35%; min-width:10rem;">
                            <span class="p-column-title">Prénom & Nom</span>
                            {{utilisateur.prenom}}  {{utilisateur.nom}} 
                        </td>

                        <td style="width:20%; min-width:8rem;">
                            <span class="p-column-title">Téléphone</span>
                            {{utilisateur.telephone}}
                        </td>
                        <td style="width:20%; min-width:10rem;">
                            <span class="p-column-title">Email</span>
                            {{utilisateur.email}}
                        </td>

                        <td style="width:15%; min-width:8rem;">
                            <span class="p-column-title">Profil</span>
                            {{utilisateur.roles[0].libelle}}
                        </td>
                        <td>
                            <div class="flex">                                
                                <button pButton pRipple icon="pi pi-pencil" pTooltip="Modifier l'utilisateur"
                                class="p-button-rounded p-button-text mr-2 button-edit simpleButton" 
                                    (click)="modifierUtilisateur(utilisateur)"></button>
                                <button pButton pRipple icon="pi pi-eye" pTooltip="Visuliser l'utilisateur"
                                class="p-button-rounded p-button-text mr-2 button-view simpleButton"
                                (click)="visuliserUtilisateur(utilisateur)"></button>                                                                    
                                <button pButton pRipple icon="pi pi-check-circle" pTooltip="Activer l'utilisateur"
                                class="p-button-rounded p-button-text mr-2 button-active simpleButton"
                                (click)="active_desactiveUtilisateur(utilisateur)" *ngIf="!utilisateur.active"></button>                                                                    
                                <button pButton pRipple icon="pi pi-times-circle" pTooltip="Desactiver l'utilisateur"
                                class="p-button-rounded p-button-text mr-2 button-delete simpleButton"
                                (click)="active_desactiveUtilisateur(utilisateur)" *ngIf="utilisateur.active"></button>
                            </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>