
<div class="grid">
    <div class="col-12">
        <p-card [style]="{'margin-bottom': '2em', 'border-radius': '2px'}" styleClass="shadow-2">
            <div class="d-flex justify-content-center col-12">
                <div class="col-12 md:col-10 tabTitle">
                    <h3 class="titleTab">Détail de la demande</h3>
                </div>  
            </div>          
            <p-toast></p-toast>
            <br>
            <br>
            <div *ngIf="page=='adhesion'" class="grid p-fluid">
                <div class="col-12 md:col-4">
                    <span class="h5texte">NINEA</span>
                    <div class="p-inputgroup">
                        <span class="p-float-label">
                            <input type="text" id="inputtext" pInputText [(ngModel)]="value1" [disabled]="true" />
                            <label for="inputtext">{{demande.pme.ninea}}</label>
                        </span>
                    </div>
                </div>
                <div class="col-12 md:col-4">
                    <span class="h5texte">RCCM</span>
                    <div class="p-inputgroup">
                        <span class="p-float-label">
                            <input type="text" id="inputtext" pInputText [(ngModel)]="value1" [disabled]="true" />
                            <label for="inputtext">{{demande.pme.rccm}}</label>
                        </span>
                    </div>
                </div>
                <div class="col-12 md:col-4">
                    <span class="h5texte">Date de la demande</span>
                    <div class="p-inputgroup">
                        <span class="p-float-label">
                            <input type="text" id="inputtext" pInputText [(ngModel)]="value1" [disabled]="true" />
                            <label for="inputtext">{{demande.dateDemandeAdhesion | date:'dd/MM/yyyy'}}</label>
                        </span>
                    </div>
                </div>
                <div *ngIf="demande.type_marche" class="col-12 md:col-4">
                    <span class="h5texte">Nom du marché</span>
                    <div class="p-inputgroup">
                        <span class="p-float-label">
                            <input type="text" id="inputtext" pInputText [(ngModel)]="value1" [disabled]="true" />
                            <label for="inputtext">{{demande.type_marche}}</label>
                        </span>
                    </div>
                </div>
            </div>
            <div *ngIf="page=='demande cession'" class="grid p-fluid">
                <div class="col-12 md:col-3">
                    <span class="h5texte">NINEA</span>
                    <div class="p-inputgroup">
                        <span class="p-float-label">
                            <input type="text" id="inputtext" pInputText [(ngModel)]="value1" [disabled]="true" />
                            <label for="inputtext">{{demande.pme.ninea}}</label>
                        </span>
                    </div>
                </div>
                <div class="col-12 md:col-3">
                    <span class="h5texte">Nom du marché</span>
                    <div class="p-inputgroup">
                        <span class="p-float-label">
                            <input type="text" id="inputtext" pInputText [(ngModel)]="value1" [disabled]="true" />
                            <label for="inputtext">{{demande.bonEngagement.nomMarche}}</label>
                        </span>
                    </div>
                </div>
                <div class="col-12 md:col-3">
                    <span class="h5texte">Référence du BE</span>
                    <div class="p-inputgroup">
                        <span class="p-float-label">
                            <input type="text" id="inputtext" pInputText [(ngModel)]="value1" [disabled]="true" />
                            <label for="inputtext">{{demande.bonEngagement.reference}}</label>
                        </span>
                    </div>
                </div>
                <div class="col-12 md:col-3">
                    <span class="h5texte">Date de la demande</span>
                    <div class="p-inputgroup">
                        <span class="p-float-label">
                            <input type="text" id="inputtext" pInputText [(ngModel)]="value1" [disabled]="true" />
                            <label for="inputtext">{{demande.dateDemandeCession  | date:'dd/MM/yyyy'}}</label>
                        </span>
                    </div>
                </div>
                
            </div>
            <br>
            <br>
            <div class="col-12" id="outerContainer" styleClass="shadow-8">
                <div class="card">
                    <p-table #dt [value]="documents" [columns]="cols" responsiveLayout="scroll" [rows]="10"
                        [globalFilterFields]="['nomDocument']" [rows]="5" [paginator]="true"
                        [rowsPerPageOptions]="[5,10,20,30]" [showCurrentPageReport]="true"
                        currentPageReportTemplate=" {totalRecords} lignes"
                        [(selection)]="selectedDocuments" selectionMode="multiple" [rowHover]="true" dataKey="id">
                        
                        <ng-template pTemplate="header">
                            <tr>
                                <th pSortableColumn="typeDocument" style="color: #203359;"> Pièces jointes <p-sortIcon
                                        field="typeDocument">
                                    </p-sortIcon>
                                </th>
                                <th pSortableColumn="nomDocument" style="color: #203359;">Nom de Document <p-sortIcon
                                        field="nomDocument">
                                    </p-sortIcon>
                                </th>
                                <th pSortableColumn="datesoumission" style="color: #203359;">Date de soumission <p-sortIcon
                                        field="datesoumission"></p-sortIcon>
                                </th>
                                <th style="color: #203359;">Action</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-document>
                            <tr>
                                <td style="width:30%; min-width:10rem;">
                                    <span class="p-column-title">Type de Document</span>
                                    {{document?.typeDocument}}
                                </td>

                                <td style="width:30%; min-width:8rem;">
                                    <span class="p-column-title">Nom de Document</span>
                                    {{document?.nom}}
                                </td>
                                <td style="width:30%;">
                                    <span class="p-column-title">Date de Soumission</span>
                                    {{document?.dateSauvegarde| date:'dd/MM/yyyy'}}
                                </td>
                                <td>
                                    <div class="flex">
                                        <button pButton pRipple icon="pi pi-search" class="p-button-rounded simpleButton"
                                            (click)="visualiserDocument(document)"></button>
                                    </div>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
            <br><br>
            <div *ngIf="page=='demande cession'" class="grid p-fluid">
                <div class="col-12 md:col-12">
                    <span class="h5texte">Commentaire du service de cession</span>
                    <div class="p-inputgroup">
                        <span class="p-float-label">
                            <textarea [rows]="5" [cols]="30" pInputTextarea autoResize="autoResize"style="background-color:#D3D3D3;">{{observationLibelle}}</textarea>
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="boutton">
            </div>
            <ng-template pTemplate="footer">
            </ng-template>
            <br>
        </p-card>
    </div>
</div>