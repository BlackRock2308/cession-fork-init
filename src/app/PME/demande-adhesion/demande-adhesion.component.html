
      <div class="layout-wrapper" (click)="onLayoutClick()"
      [ngClass]="{'layout-horizontal': app.horizontalMenu,
                 'layout-wrapper-static': staticMenuActive,
                 'layout-rightpanel-active': rightPanelActive,
                 'layout-topbar-mobile-active': topbarMobileMenuActive,
                 'layout-megamenu-mobile-active': megaMenuMobileActive,
                 'layout-sidebar-mobile-active': menuMobileActive,
                 'p-input-filled': app.inputStyle === 'filled',
                 'p-ripple-disabled': !app.ripple}" [class]="app.menuColor">
 
     

<!-- Side bar -->
<div class="layout-sidebar dark-blue-bg" [ngClass]="{'layout-sidebar-active': sidebarActive}" (click)="onSidebarClick($event)"
(mouseover)="sidebarActive=true" (mouseleave)="sidebarActive=false">
<div class="sidebar-logo">
   <a href="#" class="sidebar-pin" title="Toggle Menu" (click)="onToggleMenuClick($event)">
       <i class="pi pi-lock" *ngIf="staticMenuActive"></i>
       <i class="pi pi-lock-open" *ngIf="!staticMenuActive"></i>
   </a>
   <a routerLink="/">
       <i class="pi pi-bars"></i>
       
   </a>
   
</div>

<div class="layout-menu-container"  (click)="onMenuClick()">
   
   <ul class="layout-menu">
       
     <div class="p-4 pt-5">
               
       <div>
           <br>
           <br>
       </div>
<h1>Wootoo</h1>
   <div>
       <br>
       <br>
   </div>
<ul class="list-unstyled components mb-5">
   <div class="tableau_bord" *ngIf="sidebarActive" >
   <li>
       <h3>Tableau de bord</h3>
   </li>
   
</div>
<div>
   <br>
   <br>
</div>
<li class="active">
 <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Demandes</a>
 <ul class="collapse list-unstyled" id="homeSubmenu">
   <li>
       <a>Nouvelle demande</a>
   </li>
   <li>
       <a>Demandes en cours</a>
   </li>
  
 </ul>
</li>
<li>
   <a href="#">Suivi des paiements</a>
</li>

</ul>

<div class="footer">

</div>

</div>
   </ul>
</div>
</div>
 
     <div class="layout-main">
         <app-navbar></app-navbar>
 
        
<!-- Contenu -->
         <div class="layout-content">
            
            <div class="grid">
                <div class="col-12">
                    <div class="card">
                        
            
                        <p-table #dt [value]="demandes" [columns]="cols" responsiveLayout="scroll" [rows]="10" [globalFilterFields]="['name','country.name','representative.name','status']" [rows]="10" [paginator]="true" [rowsPerPageOptions]="[5,10,20,30]" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {last} to {first} of {totalRecords} entries" [(selection)]="selectedProducts" selectionMode="multiple" [rowHover]="true" dataKey="id" >
                            <ng-template pTemplate="caption">
                                <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center tab">
                                    <h4 class="m-2 title">Demandes en cours</h4>
                                    <span class="block mt-2 md:mt-0 p-input-icon-left">
                                        <i class="pi pi-search"></i>
                                        <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Rechercher..." />
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr>
                                    
                                    <th pSortableColumn="ninea" style="color: #203359;">Reference du BE <p-sortIcon field="ninea"></p-sortIcon></th>
                                    <th pSortableColumn="datesoumission" style="color: #203359;">Date soumission <p-sortIcon field="datesoumission"></p-sortIcon></th>
                                    <th pSortableColumn="rccm" style="color: #203359;">Statut <p-sortIcon field="rccm"></p-sortIcon></th>

                                    <th style="color: #203359;">Actions</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-demande>
                                <tr>
                                   
                                    <td style="width:30%; min-width:10rem;">
                                        <span class="p-column-title">NINEA</span>
                                        {{demande.ninea}}
                                    </td>
                                    
                                    <td style="width:30%; min-width:8rem;">
                                        <span class="p-column-title">RCCM</span>
                                        {{demande.date_soumission}}
                                    </td>
                                    <td style="width:30%;">
                                        <span class="p-column-title">Date Soumission</span>
                                        {{demande.statut}}
                                    </td>
                                    
                                    <td>
                                        <div class="flex">
                                            <button pButton pRipple icon="pi pi-eye" class="p-button-rounded mr-2 button" pInputText  pTooltip="Consulter les dossiers" (click)="editProduct(product)" ></button>
                                            <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded mr-2 button" pTooltip="Completer le dossier" [routerLink]="['/complement_documents']" [state]="{ infos:this.basicInfo }"></button>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
            
                    <p-dialog showHeader="false" [(visible)]="productDialog" [style]="{width: '80%'}"  [modal]="true" >
                        <ng-template pTemplate="header">
                            
                        </ng-template>
                        <div class="col-12">
                            
                            <div class="cardDoc card-w-title flex flex-wrap">
                                <div class="col-12 md:col-8 h-full">
                                    <h5 style="text-align:center;position: relative; right: -200px;">Documents Complementaires</h5>
                                    
                                </div>
                                <div class="col-12 md:col-4 mt-5 md:mt-0">
                                    <router-outlet>
                                    </router-outlet>
                                </div>
                            </div>
                        </div>
                        <div><br></div>
                        <ng-template pTemplate="content">
                            <div class="p-formgrid grid ml-auto">
                                <div class="field grid">
                                    <label htmlFor="ninea" class="col-10 mb-2 md:col-2 md:mb-0">Reference du BE</label>
                                    <div class="col-12 md:col-8 ml-4">
                                        <ng-template  #elseNINEABlock id="NINEAfile" type="text" pInputText>{{demande.ninea}}</ng-template>
                                   </div>
                                </div>
                                <div class="field grid ml-auto">
                                    <label htmlFor="rccm" class="col-12 mb-2 md:col-2 md:mb-0">Date Soumission</label>
                                    <div class="col-12 md:col-8 ml-4">
                                        <span>{{demande.statut}}</span>
                                    </div>
                                </div>
                            </div><br>
                            
                            <br>
                            <div class="">
                                <div class="mt-8 p-fluid">
                                    <form [formGroup]="form" (ngSubmit)="onSubmit()">
                            
                                    <div class="field grid">
                            
                                        
    <p-dropdown [options]="cities" [(ngModel)]="selectedCity1" placeholder="Selectionner le type du document" optionLabel="name" [showClear]="true"></p-dropdown>

    
                                        
                            
                                        <div class="col-12 md:col-6 mb-2">
                                                <div class="col-12">
                            
                                                    <div class="formgroup-inline">
                            
                                                        <div class="field col-12 md:col-5 mb-1">
                                                            <input  *ngIf="selectedBONFiles==null;else elseNINEABlock" id="NINEAfile" type="text" pInputText  pTooltip="Charger le fichier du bon" placeholder="Here">
                                                            <ng-template  #elseNINEABlock id="NINEAfile" type="text" pInputText  pTooltip="Upload NINEA file">{{selectedBONFiles.name}}</ng-template>
                                                            <input formControlName="nineaFile" class="hidden" type="file" id="upload-NINEAfile" name="upload-BONfile"  ngf-max-size="2MB" (change)="selectBONFile($event)">
                                                        </div>
                            
                                                        <div class="field col-12 md:col-5 mb-1">
                            
                                                            <button type="button" pButton pRipple label="Parcourir" icon="pi pi-upload" class="mr-2 mb-2 upload " id="upload-NINEAfile" (click)="handleBONClick()" ></button>
                                                        </div>
                            
                                                    </div>
                                                    
                                                </div>
                            
                                        </div>

                                        
                                        
                                    </div>

                                    
                                   
                                    <div class="field grid" style="margin-top: 30px;">
                                        <label class="col-12 mb-2 md:col-1 md:mb-0"></label>
                            
                                        <div class="col-12 md:col-4">
                                            <button type="submit"
                                            class="btn btn-success"
                                            [disabled]="!form.valid" pButton pRipple  label="Soumettre" class="p-button-danger mr-2 mb-2"></button>
                                        </div>
                            
                                    </div>
                                    </form>
                                    
                                </div>
                            
                            
                            
            
                            </div>
                            
                        </ng-template>
            
                      
                    </p-dialog>
            
                    <p-dialog [(visible)]="deleteProductDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
                            <span *ngIf="product">Are you sure you want to delete <b>{{product.name}}</b>?</span>
                        </div>
                        <ng-template pTemplate="footer">
                            <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductDialog = false"></button>
                            <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDelete()"></button>
                        </ng-template>
                    </p-dialog>
            
                    <p-dialog [(visible)]="deleteProductsDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
                            <span>Are you sure you want to delete selected products?</span>
                        </div>
                        <ng-template pTemplate="footer">
                            <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductsDialog = false"></button>
                            <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDeleteSelected()"></button>
                        </ng-template>
                    </p-dialog>
                </div>
            </div>
            
              
             
         </div>
 
         
         
         <div class="layout-main-mask"></div>
         <div class="layout-config-mask" *ngIf="configActive" [@mask-anim]="'visible'"></div>
        
     </div>
 </div>
 
   

    
	