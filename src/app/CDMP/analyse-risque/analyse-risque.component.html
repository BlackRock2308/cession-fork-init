<div class="layout-wrapper" (click)="onLayoutClick()"
[ngClass]="{'layout-horizontal': app.horizontalMenu,
           'layout-wrapper-static': staticMenuActive,
           'layout-rightpanel-active': rightPanelActive,
           'layout-topbar-mobile-active': topbarMobileMenuActive,
           'layout-megamenu-mobile-active': megaMenuMobileActive,
           'layout-sidebar-mobile-active': menuMobileActive,
           'p-input-filled': app.inputStyle === 'filled',
           'p-ripple-disabled': !app.ripple}" [class]="app.menuColor">



    <!-- Sidebar CDMP -->
    <div class="layout-sidebar dark-blue-bg" [ngClass]="{'layout-sidebar-active': sidebarActive}" (click)="onSidebarClick($event)"
     (mouseover)="sidebarActive=true" (mouseleave)="sidebarActive=false">
    <div class="sidebar-logo">
        <a href="#" class="sidebar-pin" title="Toggle Menu" (click)="onToggleMenuClick($event)">
            <i class="pi pi-lock" *ngIf="staticMenuActive"></i>
            <i class="pi pi-lock-open" *ngIf="!staticMenuActive"></i>
        </a>
        <a routerLink="/">
            <i class="pi pi-bars"></i>
            <span class="app-name">CDMP</span>
        </a>
    </div>

    <div class="layout-menu-container"  (click)="onMenuClick()">
        <ul class="layout-menu">
          <div class="p-4 pt-5">
                    
            <div>
                <br>
                <br>
            </div>
  <h1>Wootoo</h1>
        <div>
            <br>
            <br>
        </div>
  <ul class="list-unstyled components mb-5">
        <div class="tableau_bord" *ngIf="sidebarActive" >
        <li>
            <h3>Tableau de bord</h3>
        </li>
        
    </div>
    <div>
        <br>
        <br>
    </div>
    <li class="active">
      <a [routerLink]="">Demandes adhesion</a>
      
    </li>
    <li>
        <a href="#">Recevabilité</a>
    </li>

    <li>
        <a href="#">Analyse du risque sur cession</a>
    </li>
   
  </ul>

  <div class="footer">
    
  </div>

</div>
        </ul>
    </div>
</div>


           
     

     <div class="layout-main">
         <app-navbar></app-navbar>
 
        
 
         <div class="layout-content">

            <div class="grid">
                <div class="col-12">
                    <div class="card">
                        
            
                        <p-table #dt [value]="demandes" [columns]="cols" responsiveLayout="scroll" [rows]="10" [globalFilterFields]="['name','country.name','representative.name','status']" [rows]="10" [paginator]="true" [rowsPerPageOptions]="[5,10,20,30]" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {last} to {first} of {totalRecords} entries" [(selection)]="selectedProducts" selectionMode="multiple" [rowHover]="true" dataKey="id" >
                            <ng-template pTemplate="caption">
                                <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center tab">
                                    <h4 class="m-2 title">Demandes en cours</h4>
                                    <span class="block mt-2 md:mt-0 p-input-icon-left">
                                        <i class="pi pi-search"></i>
                                        <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Search..." />
                                    </span>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr>
                                    
                                    <th pSortableColumn="ninea" style="color: #203359;">NINEA <p-sortIcon field="ninea"></p-sortIcon></th>
                                    <th pSortableColumn="rccm" style="color: #203359;">RCCM <p-sortIcon field="rccm"></p-sortIcon></th>
                                    <th pSortableColumn="datesoumission" style="color: #203359;">Date soumission <p-sortIcon field="datesoumission"></p-sortIcon></th>
                                    <th style="color: #203359;">Action</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-demande>
                                <tr>
                                   
                                    <td style="width:30%; min-width:10rem;">
                                        <span class="p-column-title">NINEA</span>
                                        {{demande.ninea}}
                                    </td>
                                    
                                    <td style="width:30%; min-width:8rem;">
                                        <span class="p-column-title">RCCM</span>
                                        {{demande.rccm}}
                                    </td>
                                    <td style="width:30%;">
                                        <span class="p-column-title">Date Soumission</span>
                                        {{demande.date_soumission}}
                                    </td>
                                    
                                    <td>
                                        <div class="flex">
                                            <button pButton pRipple icon="pi pi-eye" class="p-button-rounded mr-2 button" (click)="editProduct(product)" disabled></button>
                                            <button pButton pRipple icon="pi pi-eye" class="p-button-rounded mr-2 button" (click)="editProduct(product)" disabled></button>
                                            <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded mr-2 button" (click)="editProduct(product)"></button>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
            
                    <p-dialog showHeader="false" [(visible)]="productDialog" [style]="{width: '80%'}"  [modal]="true" >
                        <ng-template pTemplate="header">
                            Header content here
                        </ng-template>
                        <div class="col-12">
                            
                            <div class="card card-w-title flex flex-wrap">
                                <div class="col-12 md:col-8 h-full">
                                    <h5>TabMenu</h5>
                                    <p-tabMenu styleClass="mb-5" [model]="routeItems"></p-tabMenu>
                                </div>
                                <div class="col-12 md:col-4 mt-5 md:mt-0">
                                    <router-outlet>
                                    </router-outlet>
                                </div>
                            </div>
                        </div>
                        <ng-template pTemplate="content">
                            <div class="p-formgrid grid ml-auto">
                                <div class="field grid">
                                    <label htmlFor="ninea" class="col-12 mb-2 md:col-2 md:mb-0">NINEA</label>
                                    <div class="col-12 md:col-8 ml-4">
                                        <input pInputText id="name3" type="text" [(ngModel)]="product.name" />
                                   </div>
                                </div>
                                <div class="field grid ml-auto">
                                    <label htmlFor="rccm" class="col-12 mb-2 md:col-2 md:mb-0">RCCM</label>
                                    <div class="col-12 md:col-8 ml-4">
                                        <input pInputText id="name3" type="text" [(ngModel)]="product.category" />
                                    </div>
                                </div>
                            </div><br>
                            <div class="mx-auto" style="width: 200px;">
                                   Vérification
                            </div>
                            <br>
                            <div class="">
                                <div class="field grid">
                                    <label htmlFor="rccm" class="col-12 mb-4 md:col-4 md:mb-0">Ninea existant</label>
                                    <div class="col-12 md:col-4">
                                        <div class="field-radiobutton">
                                            <p-radioButton name="nineaValide" value="true" [(ngModel)]="valRadio" id="oui" icon="pi pi-check-circle" [model]="items" styleClass="p-button-success mr-2 mb-2" (click)="nineaValide()"></p-radioButton>
                                            <label for="city1">Oui</label>
                                        </div>
                                    </div>
                                    <div class="col-12 md:col-4 ">
                                        <div class="field-radiobutton">
                                            <p-radioButton name="nineaNonValide" value="false" [(ngModel)]="valRadio" id="non" icon="pi pi-ban" [model]="items" styleClass="p-button-danger mr-2 mb-2"></p-radioButton>
                                            <label for="city1">Non</label>
                                        </div>
                                    </div>
                                </div>
                            
                            
            
                                <div id="actif" class="field grid" style="display:none;">
                                    
                                        <label htmlFor="rccm" class="col-12 mb-4 md:col-4 md:mb-0">PME actif</label>
                                        <div class="col-12 md:col-4 ml-auto">
                                            <div class="field-radiobutton">
                                                <p-radioButton name="pmeActif" value="true" [(ngModel)]="valRadio" id="oui" icon="pi pi-check-circle" [model]="items" styleClass="p-button-success mr-2 mb-2" (click)="nineaValide()"></p-radioButton>
                                                <label for="city1">Oui</label>
                                            </div>
                                         </div>
                                        <div class="col-12 md:col-4 ml-auto">
                                            <p-button label="Non" icon="pi pi-ban" [model]="items" styleClass="p-button-danger mr-2 mb-2"></p-button>
                                        </div>
                                        <div class="col-12 md:col-4 ml-auto">
                                            <button pButton pRipple label="Submit" icon="pi " iconPos="right" class="mr-2 mb-2"></button>
                                        </div>
            
                                </div>
                            </div>
                            
                        </ng-template>
            
                      
                    </p-dialog>
            
                    <p-dialog [(visible)]="deleteProductDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
                            <span *ngIf="product">Are you sure you want to delete <b>{{product.name}}</b>?</span>
                        </div>
                        <ng-template pTemplate="footer">
                            <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductDialog = false"></button>
                            <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDelete()"></button>
                        </ng-template>
                    </p-dialog>
            
                    <p-dialog [(visible)]="deleteProductsDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
                            <span>Are you sure you want to delete selected products?</span>
                        </div>
                        <ng-template pTemplate="footer">
                            <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductsDialog = false"></button>
                            <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDeleteSelected()"></button>
                        </ng-template>
                    </p-dialog>
                </div>
            </div>
            
        </div>

    </div>

</div>